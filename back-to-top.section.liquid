{%- comment -%}
    INCOMPLETE
        - smooth scroll back to top failing
        - add more customization
{%- endcomment -%}

{%- comment -%}Assignments{%- endcomment -%} 
{%- assign trigger_verticle_offset = 200 -%} 
{%- assign trigger_position_from_bottom = '2em' -%}

<a href="#" id="backToTop" title="Back to the top" class="back-to-top hide">
	<span>Back to the top</span>
	<i class="fa fa-arrow-circle-o-up fa-2x"></i>
</a>

{{ "//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" | stylesheet_tag }}

<style>
	.back-to-top {
	    position: fixed;
	    bottom: {{ trigger_position_from_bottom }};
	    right: 0px;
	    text-decoration: none;
	    color: #999;
	    background-color: #eee;
	    font-size: 16px;
	    padding: 0.3em;
	    -webkit-border-top-left-radius: 3px;
	    -webkit-border-bottom-left-radius: 3px;
	    -moz-border-radius-topleft: 3px;
	    -moz-border-radius-bottomleft: 3px;
	    border-top-left-radius: 3px;
	    border-bottom-left-radius: 3px;
	    z-index:60000;
	}
	.back-to-top i {
	    vertical-align: middle;
	}
	.back-to-top span {
	    padding-left: 0.5em;
	}
	.back-to-top i + span {
	    padding-left: 0;
	}
	.back-to-top:hover {
	    text-decoration: none;
	    color: #555;
	}
	.hide {
	    display: none !important;
	}
</style>

<script>
	(function() {
        var goTopBtn = document.querySelector('#backToTop');

	    function trackScroll() {
	        var scrolled = window.pageYOffset;
	        var coords = {{ trigger_verticle_offset }};

            if (scrolled > coords) {
                goTopBtn.classList.remove('hide')
            }
            if (scrolled < coords) {
                goTopBtn.classList.add('hide')
            }
	    }

        function backToTop() {
            if (window.pageYOffset > 0) {
              window.scrollBy({ top: -30, behaviour: 'smooth'});
                setTimeout(backToTop, 5000);
            }
        }

        window.addEventListener('scroll', trackScroll);
        goTopBtn.addEventListener('click', backToTop);
	})();
</script>
